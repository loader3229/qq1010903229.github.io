<!doctype html>
<html lang="zh-cn">
<head>
<meta charset="utf-8">
<title>BanG! Simulator到Bestdori谱面转换器</title>
</head>
<body>
<a href="/bandoricharts">loader3229的BanG Dream! 自制谱列表</a>
<a href="/bandorivals">loader3229的BanG Dream! 定数表</a>
<a href="/bandoribangpack">loader3229的bangpack列表</a>
<a href="/BanGSimToBestdori">BanG! Simulator到Bestdori谱面转换器</a>
<a href="/bandoril2dsettings">Live2D设置</a>
<a href="javascript:void(setl2dm(localStorage.l2dm));">Live2D模型显示不正常修复</a>
<hr>
<h1>BanG! Simulator到Bestdori谱面转换器</h1><br>
输入BanG! Simulator谱面：&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(b());">开始转换</a><br><textarea id="g" style="width:600px;height:200px;"></textarea><br>
Bestdori谱面：<input id="bestdorioutput" readonly="readonly">
<script>
function b(){
	try{
		var a=0,b=0,ln=0,t=g.value.split('\n'),bestdori=[];
		var bestdori_slidea=[],bestdori_slideb=[];
		var bestdori_longnotes=[[],[],[],[],[],[],[],[]];
		if(parseFloat(t[1])&&t[1].split('/')[1]===undefined)bestdori.push({type:"BPM",beat:0,bpm:parseFloat(t[1])});
		for(var i=0;t[i];i++){
			if(t[i].split('/')[1]=="4"){
				if(a==0)t[i]=t[i].split('/')[0]+'/3/'+t[i].split('/')[2];
			}
			if(t[i].split('/')[1]=="7"){
				if(b==0)t[i]=t[i].split('/')[0]+'/6/'+t[i].split('/')[2];
			}
			if(t[i].split('/')[1]=="1"){
				bestdori.push({type:"Single",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
			}
			if(t[i].split('/')[1]=="2"){
				bestdori.push({type:"Single",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,flick:true});
			}
			if(t[i].split('/')[1]=="3"){
				if(a==1)alert('警告：意外出现的滑条A开始Note：'+t[i]);
				a=1;
				bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
			}
			if(t[i].split('/')[1]=="4"){
				if(a==0)alert('警告：意外出现的滑条A节点Note：'+t[i]);
				a=1;
				bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
			}
			if(t[i].split('/')[1]=="5"){
				if(a==0)alert('警告：意外出现的滑条A结束Note：'+t[i]);
				a=0;
				bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
				bestdori.push({type:"Slide",connections:bestdori_slidea});
				bestdori_slidea=[];
			}
			if(t[i].split('/')[1]=="6"){
				if(b==1)alert('警告：意外出现的滑条B开始Note：'+t[i]);
				b=1;
				bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
			}
			if(t[i].split('/')[1]=="7"){
				if(b==0)alert('警告：意外出现的滑条B节点Note：'+t[i]);
				b=1;
				bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
			}
			if(t[i].split('/')[1]=="8"){
				if(b==0)alert('警告：意外出现的滑条B结束Note：'+t[i]);
				b=0;
				bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
				bestdori.push({type:"Slide",connections:bestdori_slideb});
				bestdori_slideb=[];
			}
			if(t[i].split('/')[1]=="10"){
				bestdori.push({type:"Single",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,charge:true});
			}
			if(t[i].split('/')[1]=="11"){
				bestdori.push({type:"Single",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
			}
			if(t[i].split('/')[1]=="12"){
				if(a==0)alert('警告：意外出现的滑条A结束Note：'+t[i]);
				a=0;
				bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,flick:true});
				bestdori.push({type:"Slide",connections:bestdori_slidea});
				bestdori_slidea=[];
			}
			if(t[i].split('/')[1]=="13"){
				if(b==0)alert('警告：意外出现的滑条B结束Note：'+t[i]);
				b=0;
				bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,flick:true});
				bestdori.push({type:"Slide",connections:bestdori_slideb});
				bestdori_slideb=[];
			}
			if(t[i].split('/')[1]=="20"){
				bestdori.push({type:"BPM",beat:parseFloat(t[i].split('/')[0]),bpm:parseFloat(t[i].split('/')[2])});
			}
			if(t[i].split('/')[1]=="21"){
				ln=1;
				bestdori_longnotes[parseFloat(t[i].split('/')[2])-1].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
			}
			if(t[i].split('/')[1]=="25"){
				ln=1;
				bestdori_longnotes[parseFloat(t[i].split('/')[2])-1].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
				bestdori.push({type:"Slide",connections:bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]});
				bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]=[];
			}
			if(t[i].split('/')[1]=="26"){
				ln=1;
				bestdori_longnotes[parseFloat(t[i].split('/')[2])-1].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,flick:true});
				bestdori.push({type:"Slide",connections:bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]});
				bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]=[];
			}
			if(t[i].split('/')[1]=="31"){
				ln=1;
				bestdori_longnotes[parseFloat(t[i].split('/')[2])-1].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
			}
			if(t[i].split('/')[1]=="32"){
				ln=1;
				bestdori_longnotes[parseFloat(t[i].split('/')[2])-1].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
				bestdori.push({type:"Slide",connections:bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]});
				bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]=[];
			}
			if(t[i].split('/')[1]=="33"){
				if(a==1)alert('警告：意外出现的滑条A开始Note：'+t[i]);
				a=1;
				bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
			}
			if(t[i].split('/')[1]=="34"){
				if(a==0)alert('警告：意外出现的滑条A结束Note：'+t[i]);
				a=0;
				bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
				bestdori.push({type:"Slide",connections:bestdori_slidea});
				bestdori_slidea=[];
			}
			if(t[i].split('/')[1]=="35"){
				if(b==1)alert('警告：意外出现的滑条B开始Note：'+t[i]);
				b=1;
				bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
			}
			if(t[i].split('/')[1]=="36"){
				if(b==0)alert('警告：意外出现的滑条B结束Note：'+t[i]);
				b=0;
				bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
				bestdori.push({type:"Slide",connections:bestdori_slideb});
				bestdori_slideb=[];
			}
			if(t[i].split('/')[1]=="41"){
				if(a==0)alert('警告：意外出现的滑条A隐藏节点Note：'+t[i]);
				a=1;
				bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,hidden:true});
			}
			if(t[i].split('/')[1]=="42"){
				if(b==0)alert('警告：意外出现的滑条B隐藏节点Note：'+t[i]);
				b=1;
				bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,hidden:true});
			}
			if(t[i].split('/')[1]=="51"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":1});
			}
			if(t[i].split('/')[1]=="52"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":2});
			}
			if(t[i].split('/')[1]=="53"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":3});
			}
			if(t[i].split('/')[1]=="54"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":4});
			}
			if(t[i].split('/')[1]=="55"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":5});
			}
			if(t[i].split('/')[1]=="56"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":6});
			}
			if(t[i].split('/')[1]=="57"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":7});
			}
			if(t[i].split('/')[1]=="61"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":1});
			}
			if(t[i].split('/')[1]=="62"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":2});
			}
			if(t[i].split('/')[1]=="63"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":3});
			}
			if(t[i].split('/')[1]=="64"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":4});
			}
			if(t[i].split('/')[1]=="65"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":5});
			}
			if(t[i].split('/')[1]=="66"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":6});
			}
			if(t[i].split('/')[1]=="67"){
				bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":7});
			}
		}
		g.value=t.join('\n');
		bestdorioutput.value=JSON.stringify(bestdori);
		if(a||b)alert('警告：滑条没有结束：'+(a?'A':"")+(b?'B':""));
		alert('成功。');
		bestdori_slidea=[];
		bestdori_slideb=[];
		bestdori_longnotes=[[],[],[],[],[],[],[],[]];
		return;
	}catch(e){alert('错误：'+e);return;}
}
</script>
<script src="bandoril2d/jquery.min.js"></script>
<script src="bandoril2d/live2d.js"></script>
<script src="bandoril2d/live2d-mp.js"></script>
    <link rel="stylesheet" type="text/css" href="bandoril2d/waifu.css"/>
<div class="waifu">
        
        <canvas id="live2d" class="live2d"></canvas>
    </div>
</body>
</html>
